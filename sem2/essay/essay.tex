% TODO add sidetall pÃ¥ alle kilder

\documentclass[12pt]{article}

\setlength\parindent{0pt}

\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage[a4paper, total={}]{geometry}
\setlength{\headsep}{5pt}
\setlength{\parskip}{1em}
\usepackage{listings}

\definecolor{pblue}{rgb}{0.2,0.2,0.7}
% \definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.7,0.2,0.2}
\definecolor{pgrey}{rgb}{0.46,0.45,0.48}

\lstset{
  backgroundcolor = \color{lightgray},
  language=Bash,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

\hbadness=10000

\usetikzlibrary{automata, positioning, arrows}

\tikzset{
    ->,
    node distance=3cm,
    initial text=$ $,
}

\title{Real-time management of code clones in an IDE environment}

\author{Jakob Hansen}

\date{\today}

\begin{document}
\maketitle

\tableofcontents

\section{Introduction}

Refactoring is the process of restructuring code in order to improve the internal behavior
of the code, without changing the external behavior.\cite[9]{fowlerrefactoring} Refactoring
is often done in order to eliminate ``smelly`` code.

A study conducted by Diego Cedrim et al.\cite{Rohit_Gheyi_Impact} has shown that while
developers tend to refactor smelly code, they are rarely successful at eliminating the
smells they are targetting. A large portion of refactorings even tend to make the code
smellier. Therefore, automated tools to help developers make better refactorings and code
analysis is an important field of research.

Duplicated code is a code smell which occurs in practically every large software project.
Code clone analysis has recently become an active field of research and many tools have
been developed to detect duplicated code.\cite{Inoue_introduction_to_cc} However, few of
these tools have made an impact on the industry, and few have the capability of detecting
advanced types of duplicated code in a real-time IDE environment. 

This thesis will present a proposal for a tool which will fill this gap for an industry viable
clone detection tool. It will explore the topics of finding clones in real-time, managing
code clones in real-time and in providing clone detection (and refactorings in general) in
a modern IDE environment.

\section{Background}

\subsection{Software quality}

\subsubsection{Software quality metrics}

\subsubsection{How refactoring affects software quality}

\subsubsection{Duplicated code}

Write about what duplicated code is, how it affects software and some statistics on
duplicated code (need reference)

As stated, duplicated code damages software quality in practically every large software
project. Duplicated code can lead to a plethora of anti-patterns like Shotgun-Surgery and
Divergent-Change, and will often lead to an increase in technical debt for the
project.\cite[99]{fowlerrefactoring}

\subsection{Code clones}

We define a code snippet as a piece of software code in a larger software system. A code
clone is then defined as a code snippet which is equal to or similar to another code
snippet. The two code snippets are both code clones and together, they form a code clone
pair. 

\subsubsection{The clone relation}
The clone relation defines a relation between code snippets where snippets which are
code clones are related to each other. The clone relation is reflexive and symmetric, but
not always transitive. The transitive property depends on the treshold for similarity when
identifying code clones. For example if we have:

$$a \xrightarrow{clone} b \xrightarrow{clone} c$$

where $a,b,c$ are code snippets and $\xrightarrow{clone}$ gives the clone relation. In
this example $a$ may be similar to $b$, but not necessarily similar to $c$, depending on
the threshold for similarity.

\subsubsection{Code clone types}

Code clones are generally classified into four types.\cite{Inoue_introduction_to_cc} These
types classify code snippets as code clones with an increasing amount of leniency.
Therefore Type-1 code clones are very similar, while Type-4 clones are not necessarily
similar at all. However, all code clones do still have the same functionality, it is the
syntactic and structual differences which distinguish the types. The set of code clones
classified by a code clone type is also a subset of the next type, meaning all type-1
clones are also type-2 clones, but not vice versa.

The code clone types are defined as follows:

\textbf{Type-1} clones are syntactically identical. The only differences allowed are elements
without meaning, like comments and white-space. 

\textbf{Type-2} clones are structurally identical. Possible differences include
identifiers, literals and types. 

\textbf{Type-3} clones are required to be structurally similar, but not equal. Differences
include statements which are added, removed or modified. For this clone type one needs to
determine a threshold $\theta$ which determines how structurally different snippets can be
to be considered Type-3\cite{Inoue_introduction_to_cc}.

\textbf{Type-4} are clones without any requirement for structural similarity. Therefore
the only requirement is the functionality being the same.

\subsubsection{Code clone detection}

\subsubsection{Code clone management}

\section{The way forward}

\bibliography{refs}
\bibliographystyle{plain}

\end{document}
